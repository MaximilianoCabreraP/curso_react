[{"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\index.js":"1","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\App.js":"2","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Header\\Header.js":"3","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Footer\\Footer.js":"4","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\Assets\\Products.js":"5","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Header\\Logo.js":"6","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\NotFound.js":"7","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Header\\NavBar.js":"8","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemListContainer.js":"9","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemDetailContainer.js":"10","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemDetail.js":"11","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Header\\CartWidget.js":"12","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\Loader.js":"13","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemList.js":"14","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemCount.js":"15","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\Item.js":"16","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\Cart.js":"17","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\context\\CartState.js":"18","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemCarrito.js":"19","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\context\\CartContext.js":"20","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\firebaseConfig.js":"21","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ResumenCompra.js":"22","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\MisPedidos.js":"23","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\Wishlist.js":"24"},{"size":165,"mtime":1609791245081,"results":"25","hashOfConfig":"26"},{"size":2359,"mtime":1611941788035,"results":"27","hashOfConfig":"26"},{"size":541,"mtime":1611694754653,"results":"28","hashOfConfig":"26"},{"size":203,"mtime":1610111777025,"results":"29","hashOfConfig":"26"},{"size":1566,"mtime":1611172283899,"results":"30","hashOfConfig":"26"},{"size":296,"mtime":1610542486630,"results":"31","hashOfConfig":"26"},{"size":276,"mtime":1610542486620,"results":"32","hashOfConfig":"26"},{"size":2157,"mtime":1611941668227,"results":"33","hashOfConfig":"26"},{"size":1992,"mtime":1611781400553,"results":"34","hashOfConfig":"26"},{"size":1342,"mtime":1611599463541,"results":"35","hashOfConfig":"26"},{"size":1456,"mtime":1611838781093,"results":"36","hashOfConfig":"26"},{"size":567,"mtime":1611939125696,"results":"37","hashOfConfig":"26"},{"size":486,"mtime":1610542486615,"results":"38","hashOfConfig":"26"},{"size":420,"mtime":1611781612713,"results":"39","hashOfConfig":"26"},{"size":868,"mtime":1611709451819,"results":"40","hashOfConfig":"26"},{"size":605,"mtime":1611781421171,"results":"41","hashOfConfig":"26"},{"size":2497,"mtime":1611941767607,"results":"42","hashOfConfig":"26"},{"size":1875,"mtime":1611970507597,"results":"43","hashOfConfig":"26"},{"size":2660,"mtime":1611762458913,"results":"44","hashOfConfig":"26"},{"size":138,"mtime":1611597308159,"results":"45","hashOfConfig":"26"},{"size":563,"mtime":1611758416816,"results":"46","hashOfConfig":"26"},{"size":9850,"mtime":1611970523777,"results":"47","hashOfConfig":"26"},{"size":3745,"mtime":1612055668699,"results":"48","hashOfConfig":"26"},{"size":159,"mtime":1611941175764,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"6dhh8e",{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"95","usedDeprecatedRules":"52"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\index.js",[],["100","101"],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\App.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Header\\Header.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Footer\\Footer.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\Assets\\Products.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Header\\Logo.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\NotFound.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Header\\NavBar.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemListContainer.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemDetailContainer.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemDetail.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Header\\CartWidget.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\Loader.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemList.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemCount.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\Item.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\Cart.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\context\\CartState.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ItemCarrito.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\context\\CartContext.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\firebaseConfig.js",[],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\ResumenCompra.js",["102"],"import React, { useState, useContext, useRef } from 'react';\r\n\r\nimport CartContext from '../../context/CartContext';\r\nimport { firestore } from \"../../firebaseConfig\";\r\nimport firebase from 'firebase';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst ResumenCompra = () => {\r\n    const { cart, total, idOrden, setIdOrden, setCarritoEstado, clearCart, cantItems } = useContext(CartContext);\r\n    const history = useHistory();\r\n    \r\n    const [inputs, setInputs] = useState({\r\n        nombre: \"\",\r\n        apellido: \"\",\r\n        telefono: \"\",\r\n        email: \"\",\r\n        confirmarEmail: \"\"\r\n    });\r\n    const [msjError, setError] = useState({});\r\n\r\n    const nombreRef = useRef(null);\r\n    const apellidoRef = useRef(null);\r\n    const telefonoRef = useRef(null);\r\n    const emailRef = useRef(null);\r\n    const confirmarEmailRef = useRef(null);\r\n\r\n    const handleChange = e => {\r\n        setInputs({\r\n            ...inputs,\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        if(validate()){\r\n            const batch = firestore.batch();\r\n            const collection_orders = firestore.collection(\"orders\");\r\n            const collection_products = firestore.collection(\"productos\");\r\n\r\n            (async () => {\r\n                let hayStock = true;\r\n                for await (const {item, cantidad} of cart){\r\n                    let stockFinal = 0;\r\n                    \r\n                    const producto = await collection_products.doc(item.id).get();\r\n                    if(producto.data().stock >= cantidad){\r\n                        stockFinal = producto.data().stock - cantidad;\r\n                        batch.update(collection_products.doc(item.id),{stock:stockFinal});\r\n                        continue;\r\n                    }\r\n                    hayStock = false;\r\n                    break;\r\n                }\r\n\r\n                if(hayStock){\r\n                    batch.commit()\r\n                    .then(() => {\r\n                        const {nombre, apellido, email, telefono} = inputs\r\n                        const fullName = apellido + \", \" + nombre;\r\n                        const orden = {\r\n                            buyer : {fullName, telefono, email},\r\n                            items : cart,\r\n                            date : firebase.firestore.Timestamp.fromDate(new Date()),\r\n                            total \r\n                        }\r\n\r\n                        collection_orders.add(orden)\r\n                        .then(({ id }) => {\r\n                            setIdOrden([...idOrden, id]);\r\n                        }).catch((err) =>{\r\n                            console.log(\"Error al guardar la orden. \",err);\r\n                            //TODO: Enviar mensaje al usuario para que entienda lo que está pasando\r\n                        }).finally(() => {\r\n                            let input = {};\r\n                            input[\"nombre\"] = input[\"apellido\"] = input[\"telefono\"] = input[\"email\"] = input[\"confirmarEmail\"] = \"\";\r\n                            setInputs(input);\r\n                        });\r\n                        setCarritoEstado(true);\r\n                        clearCart();\r\n                    })\r\n                    .catch((err) => {\r\n                        console.log(\"Error al commitear el batch. \", err);\r\n                        //TODO: Enviar mensaje al usuario para que entienda lo que está pasando\r\n                    }).finally(() => {\r\n                        //TODO: Poner spiner de procesando pago.\r\n                        history.push(\"/mis-pedidos\")\r\n                    });\r\n                }else{\r\n                    setCarritoEstado(false);\r\n                }\r\n            })();\r\n        }\r\n    }\r\n    const validate = () => {\r\n        return true;\r\n        let input = inputs;\r\n        let errors = {};\r\n        let isValid = true;\r\n\r\n        if (input[\"nombre\"].length <= 2) {\r\n            isValid = false;\r\n            errors[\"nombre\"] = !input[\"nombre\"]? \"Por favor ingresá un nombre.\" : \"El nombre debe contener al menos 3 caracteres.\";\r\n        }\r\n        if (input[\"apellido\"].length <= 2) {\r\n            isValid = false;\r\n            errors[\"apellido\"] = !input[\"apellido\"]?\"Por favor ingresá un apellido.\" : \"El apellido debe contener al menos 3 caracteres.\";\r\n        }\r\n\r\n        if (!input[\"telefono\"]) {\r\n            isValid = false;\r\n            errors[\"telefono\"] = \"Por favor ingresá un nro de teléfono.\";\r\n        }\r\n  \r\n        if (typeof input[\"telefono\"] !== \"undefined\") {  \r\n            var pattern = new RegExp(/^[0-9\\b]+$/);\r\n            if (!pattern.test(input[\"telefono\"])) {\r\n                isValid = false;\r\n                errors[\"telefono\"] = \"Por favor ingresá solo números.\";\r\n            }else if(input[\"telefono\"].length !== 10){\r\n                isValid = false;\r\n                errors[\"telefono\"] = \"Por favor ingresá un nro de teléfono válido (10 dígitos).\";\r\n            }\r\n        }\r\n\r\n        if (typeof input[\"email\"] !== \"undefined\") {\r\n            pattern = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\r\n            if (!pattern.test(input[\"email\"])) {\r\n                isValid = false;\r\n                errors[\"email\"] = \"Por favor ingresá un mail válido.\";\r\n            }\r\n        }\r\n\r\n        if (typeof input[\"confirmarEmail\"] !== \"undefined\") {\r\n            pattern = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\r\n            if( !input[\"confirmarEmail\"]) {\r\n                isValid = false;\r\n                errors[\"confirmarEmail\"] = \"Por favor confirmá el mail.\"\r\n            }else if(input[\"email\"] !== input[\"confirmarEmail\"]){\r\n                isValid = false;\r\n                errors[\"confirmarEmail\"] = \"Los emails no coinciden.\";\r\n            }else if (!pattern.test(input[\"confirmarEmail\"])) {\r\n                isValid = false;\r\n                errors[\"confirmarEmail\"] = \"Por favor ingresá un mail válido.\";\r\n            }\r\n        }\r\n\r\n        setError(errors);\r\n\r\n        return isValid;\r\n    }\r\n\r\n    const handleBlur = e => {\r\n        switch (e.target.name) {\r\n            case \"nombre\": setBlur(inputs.nombre,nombreRef);break;\r\n            case \"apellido\": setBlur(inputs.apellido,apellidoRef);break;\r\n            case \"telefono\": setBlur(inputs.telefono,telefonoRef);break;\r\n            case \"email\": setBlur(inputs.email,emailRef); break;\r\n            case \"confirmarEmail\": setBlur(inputs.confirmarEmail,confirmarEmailRef); break;\r\n            default: break;\r\n        }\r\n        return;\r\n    }\r\n    const setBlur = (input, ref) => {\r\n        input.trim() === \"\"?\r\n            ref.current.style.border = \"1px solid red\"\r\n            : ref.current.style.border = \"\"\r\n        return;\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <div className=\"card card-body\">\r\n                <p className=\"mb-1\">Total Items</p>\r\n                <h4 className=\" mb-3 txt-right\">{cantItems}</h4>\r\n                <p className=\"mb-1\">Total a Pagar</p>\r\n                <h3 className=\"m-0 txt-right\">${total}</h3>\r\n                <hr className=\"my-4\"></hr>\r\n                <div className=\"\">\r\n                    <form onSubmit={handleSubmit}>\r\n                        Nombre\r\n                            <input className=\"mb-1\" onChange={handleChange} ref={nombreRef} name=\"nombre\" type=\"text\" placeholder=\"Ej: Anakin\" value={inputs.nombre} onBlur={handleBlur}/>\r\n                            <p className=\"text-danger\">{msjError.nombre}</p>\r\n                        Apellido\r\n                            <input className=\"mb-1\" onChange={handleChange} ref={apellidoRef} name=\"apellido\" type=\"text\" placeholder=\"Ej: Skywalker\" value={inputs.apellido} onBlur={handleBlur}/>\r\n                            <div className=\"text-danger\">{msjError.apellido}</div>\r\n                        Teléfono\r\n                            <input className=\"mb-1\" onChange={handleChange} ref={telefonoRef} name=\"telefono\" type=\"tel\" placeholder=\"Ej: 47462211\" value={inputs.telefono} onBlur={handleBlur}/>\r\n                            <div className=\"text-danger\">{msjError.telefono}</div>\r\n                        Email<br />\r\n                            <input className=\"mb-1\" onChange={handleChange} ref={emailRef} name=\"email\" type=\"text\" placeholder=\"Ej: Soy@tupapa.com\" value={inputs.email} onBlur={handleBlur}/>\r\n                            <div className=\"text-danger\">{msjError.email}</div>\r\n                        Confirmar Mail\r\n                            <input onChange={handleChange} ref={confirmarEmailRef} name=\"confirmarEmail\" type=\"text\" placeholder=\"Ej: Soy@tupapa.com\" value={inputs.confirmarEmail} onBlur={handleBlur}/>\r\n                            <div className=\"text-danger\">{msjError.confirmarEmail}</div>\r\n                        <hr/>\r\n                        <div>\r\n                            <button onClick={handleSubmit} className=\"btn btn-primary btn-sm\">Checkout</button>\r\n                            <div className=\"separador\"></div>\r\n                            <button onClick={() => clearCart()} className=\"btn btn-outlineprimary btn-sm btn-danger\"> Vaciar Carrito</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default ResumenCompra\r\n","C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\MisPedidos.js",["103"],"C:\\Users\\hiead\\Documents\\React\\curso_react\\src\\components\\Body\\Wishlist.js",[],{"ruleId":"104","replacedBy":"105"},{"ruleId":"106","replacedBy":"107"},{"ruleId":"108","severity":1,"message":"109","line":96,"column":9,"nodeType":"110","messageId":"111","endLine":149,"endColumn":24},{"ruleId":"112","severity":1,"message":"113","line":74,"column":79,"nodeType":"114","messageId":"115","endLine":74,"endColumn":80},"no-native-reassign",["116"],"no-negated-in-lhs",["117"],"no-unreachable","Unreachable code.","VariableDeclaration","unreachableCode","no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression","no-global-assign","no-unsafe-negation"]